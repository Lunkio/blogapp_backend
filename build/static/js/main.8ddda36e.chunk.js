(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(e,t,n){e.exports=n(357)},356:function(e,t,n){},357:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(36),l=n.n(c),o=n(68),u=n(14),i=n.n(u),s=n(17),m=n(31),d=n.n(m),p="/api/blogs",f=null,b=function(){var e=Object(s.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(p);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,d.a.post(p,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(i.a.mark(function e(t,n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(p,"/").concat(t,"/comments"),{comment:n});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,d.a.delete("".concat(p,"/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),h={getAll:b,create:E,update:function(){var e=Object(s.a)(i.a.mark(function e(t,n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("".concat(p,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),remove:v,setToken:function(e){f="bearer ".concat(e)},addComment:g},y={login:function(){var e=Object(s.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},w=n(364),O=n(365),k=n(370),j=n(26),C=function(e,t){return function(n){n({type:"NEW",data:e}),setTimeout(function(){n({type:"HIDE"})},1e3*t)}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW":return t.data;case"HIDE":return"";case"TEST":return t.data;default:return e}},S=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"ADD_USER",user:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return t.user;case"REMOVE_USER":return t.data;default:return e}},T={setNotification:C,addUser:S},A=Object(j.b)(function(e){return{notifications:e.notifications,blogs:e.blogs,user:e.user}},T)(function(e){var t=function(){var t=Object(s.a)(i.a.mark(function t(n){var a,r,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target.username.value,r=n.target.password.value,t.prev=3,t.next=6,y.login({username:a,password:r});case 6:c=t.sent,window.localStorage.setItem("loggedUser",JSON.stringify(c)),h.setToken(c.token),e.addUser(c),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),e.setNotification("wrong username or password",5);case 15:case"end":return t.stop()}},t,null,[[3,12]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(w.a,{style:{marginTop:"2rem"}},r.a.createElement("h2",null,"Log in to application"),r.a.createElement(O.a,{onSubmit:t},r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Username"),r.a.createElement("input",{id:"idUsername",type:"text",name:"username",placeholder:"Username"})),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{id:"idPassword",type:"password",name:"password",placeholder:"Password"})),r.a.createElement(k.a,{primary:!0,type:"submit"},"Login"),r.a.createElement("span",{style:{marginLeft:"1rem"}},"Want to try this application? Login with these: username: ",r.a.createElement("strong",null,"test_user"),", password: ",r.a.createElement("strong",null,"bigsecret"))))}),B=n(185),D=n(190);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){Object(B.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"ADD":return[].concat(Object(D.a)(e),[t.data]);case"LIKE":var n=t.data,a=t.data.id;return e.map(function(e){return e.id!==a?e:n});case"COMMENT":var r=t.data,c=t.data.id;return e.map(function(e){return e.id!==c?e:r});case"REMOVE":return e.filter(function(e){return e.id!==t.id});default:return e}},R={addBlog:function(e,t){return function(){var n=Object(s.a)(i.a.mark(function n(a){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.create(e);case 2:r=L({},r=n.sent,{user:t}),a({type:"ADD",data:r});case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},setNotification:C},P=Object(j.b)(function(e){return{notifications:e.notifications,users:e.users,blogs:e.blogs}},R)(function(e){h.setToken(e.user.token);return r.a.createElement(O.a,{onSubmit:function(t){t.preventDefault();var n={title:t.target.title.value,author:t.target.author.value,url:t.target.url.value},a=e.user;e.addBlog(n,a),t.target.title.value="",t.target.author.value="",t.target.url.value="",e.setNotification("a new blog ".concat(n.title," by ").concat(n.author," added"),5)}},r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Title:"),r.a.createElement("input",{id:"idTitle",name:"title",placeholder:"Title"})),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Author:"),r.a.createElement("input",{id:"idAuthor",name:"author",placeholder:"Author"})),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Url:"),r.a.createElement("input",{id:"idUrl",name:"url",placeholder:"Url"})),r.a.createElement(k.a,{primary:!0,id:"idButton",type:"submit"},"Add new blog"))}),H=n(368),M=Object(j.b)(function(e){return{notifications:e.notifications,blogs:e.blogs,user:e.user}})(function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],l=n[1],u={display:c?"none":""},i={display:c?"":"none"};return e.blogs.sort(function(e,t){return e.likes-t.likes}),r.a.createElement("div",null,r.a.createElement("div",{style:u},r.a.createElement("h1",null,"Welcome to Blog App"),r.a.createElement("p",null,"Here you can add your own blogs, or read other people's blog posts"),r.a.createElement(k.a,{primary:!0,onClick:function(){return l(!0)}},"Create new blog")),r.a.createElement("div",{style:i},r.a.createElement("h2",null,"Create new"),r.a.createElement(P,{blogs:e.blogs,user:e.user}),r.a.createElement(k.a,{style:{marginTop:"1rem"},negative:!0,onClick:function(){return l(!1)}},"Cancel"),r.a.createElement("br",null)),r.a.createElement("h3",null,"Blogs:"),r.a.createElement(H.a,{celled:!0,striped:!0,selectable:!0},r.a.createElement(H.a.Header,null,r.a.createElement(H.a.Row,null,r.a.createElement(H.a.HeaderCell,null,"Title"),r.a.createElement(H.a.HeaderCell,null,"Author"))),r.a.createElement(H.a.Body,null,e.blogs.map(function(t){return r.a.createElement(H.a.Row,{key:t.id},r.a.createElement(H.a.Cell,null,r.a.createElement(e.Link,{to:"/blogs/".concat(t.id)},t.title)),r.a.createElement(H.a.Cell,null,t.author))}))))}),z={getAll:function(){var e=Object(s.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},_=function(e){return r.a.createElement("div",null,r.a.createElement(H.a,{definition:!0},r.a.createElement(H.a.Header,null,r.a.createElement(H.a.Row,null,r.a.createElement(H.a.HeaderCell,null,"Users"),r.a.createElement(H.a.HeaderCell,null,"Blogs created"))),r.a.createElement(H.a.Body,null,e.users.map(function(t){return r.a.createElement(H.a.Row,{key:t.id},r.a.createElement(H.a.Cell,null,r.a.createElement(e.Link,{className:"classTest",to:"/users/".concat(t.id)},t.name)),r.a.createElement(H.a.Cell,null,t.blogs.length))}))))},F=n(43),W=n(44),G=Object(W.e)(function(e){if(void 0===e.user)return null;var t=e.user.blogs.map(function(e){return e.title});return r.a.createElement("div",null,r.a.createElement(k.a,{basic:!0,color:"blue",size:"mini",animated:!0,onClick:function(){return e.history.push("/users")}},r.a.createElement(k.a.Content,{visible:!0},"Go back"),r.a.createElement(k.a.Content,{hidden:!0},r.a.createElement(F.a,{name:"arrow left"}))),r.a.createElement("h2",null,e.user.name),r.a.createElement("p",null,r.a.createElement("b",null,"Added Blogs:")),r.a.createElement("ul",null,e.user.blogs.map(function(e){return r.a.createElement("li",{key:e.id},e.title)})),t.length<1&&r.a.createElement("div",{style:{fontStyle:"italic"}},"No added blogs"))}),J=n(89),V=n(367),K=n(40),q={addLike:function(e,t){return function(){var n=Object(s.a)(i.a.mark(function n(a){var r,c;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=L({},t,{likes:t.likes+1}),n.next=3,h.update(e,r);case 3:c=n.sent,a({type:"LIKE",data:c});case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},addComment:function(e,t){return function(){var n=Object(s.a)(i.a.mark(function n(a){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.addComment(e,t);case 2:r=n.sent,a({type:"COMMENT",data:r});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},removeBlog:function(e,t){return function(){var n=Object(s.a)(i.a.mark(function n(a){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return h.setToken(t),n.next=3,h.remove(e);case 3:a({type:"REMOVE",id:e});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}},Q=Object(K.d)(W.e,Object(j.b)(function(e){return{user:e.user,blogs:e.blogs}},q))(function(e){if(void 0===e.blog)return null;void 0!==e.blog.user&&null!==e.blog.user||(e.blog.user={name:'"no user added this blog"'});var t;return r.a.createElement("div",null,r.a.createElement(k.a,{basic:!0,color:"blue",size:"mini",animated:!0,onClick:function(){return e.history.push("/")}},r.a.createElement(k.a.Content,{visible:!0},"Go back"),r.a.createElement(k.a.Content,{hidden:!0},r.a.createElement(F.a,{name:"arrow left"}))),r.a.createElement("h2",null,e.blog.title,", ",r.a.createElement("span",{style:{fontSize:"1rem"}},"author:")," ",e.blog.author),r.a.createElement("p",{style:{fontStyle:"italic"}},e.blog.url),r.a.createElement(k.a,{as:"div",labelPosition:"right"},r.a.createElement(k.a,{basic:!0,color:"blue",onClick:function(){return function(t){var n=t.id;e.addLike(n,t)}(e.blog)}},r.a.createElement(F.a,{name:"heart"}),"Like"),r.a.createElement(J.a,{as:"a",basic:!0,color:"blue",pointing:"left"},e.blog.likes)),r.a.createElement("p",{style:{marginTop:"2rem"}},"added by ",e.blog.user.name,r.a.createElement("span",{style:(t=e.blog,t.user.name===e.user.name?{display:"",marginLeft:"1rem"}:{display:"none"})},r.a.createElement(k.a,{basic:!0,color:"red",onClick:function(){return function(t){var n=t.id;window.confirm("remove blog ".concat(t.title," by ").concat(t.author))&&(e.removeBlog(n,e.user.token),e.history.push("/"))}(e.blog)}},"Remove"))),r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h3",null,"Comments"),r.a.createElement(O.a,{onSubmit:function(t){t.preventDefault();var n=t.target.newComment.value;e.addComment(e.blog.id,n),t.target.newComment.value=""}},r.a.createElement("input",{name:"newComment",placeholder:"Write comments"}),r.a.createElement(k.a,{primary:!0,type:"submit"},"Add Comment")),r.a.createElement(V.a,null,e.blog.comments.map(function(e,t){return r.a.createElement(V.a.Item,{key:t},r.a.createElement(V.a.Icon,{name:"users"}),r.a.createElement(V.a.Content,null,e))}))))}),X=n(42),Y=n(369),Z=n(371),$={setNotification:C,initializeBlogs:function(){return function(){var e=Object(s.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},addUser:S,removeUser:function(){return function(){var e=Object(s.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"REMOVE_USER",data:null});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},ee=Object(j.b)(function(e){return{notifications:e.notifications,blogs:e.blogs,user:e.user}},$)(function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)("blogs"),i=Object(o.a)(u,2),s=i[0],m=i[1];Object(a.useEffect)(function(){z.getAll().then(function(e){l(e)})},[]),Object(a.useEffect)(function(){e.initializeBlogs()},[]),Object(a.useEffect)(function(){var t=window.localStorage.getItem("loggedUser");if(t){var n=JSON.parse(t);e.addUser(n)}},[]);return e.user?r.a.createElement(w.a,null,r.a.createElement(X.a,null,e.notifications&&r.a.createElement(Y.a,null,e.notifications),r.a.createElement(Z.a,{pointing:!0,secondary:!0,style:{marginBottom:"2rem"}},r.a.createElement(Z.a.Item,{name:"blogs",active:"blogs"===s},r.a.createElement(X.b,{to:"/",onClick:function(){return m("blogs")}},"Blogs")),r.a.createElement(Z.a.Item,{name:"users",active:"users"===s},r.a.createElement(X.b,{to:"/users",onClick:function(){return m("users")}},"Users")),r.a.createElement(Z.a.Item,{position:"right"},r.a.createElement("span",null,e.user.name," logged in ",r.a.createElement(k.a,{basic:!0,color:"red",onClick:function(){return window.localStorage.removeItem("loggedUser"),void e.removeUser()}},"Logout")))),r.a.createElement("div",null,r.a.createElement(W.a,{exact:!0,path:"/",render:function(){return r.a.createElement(M,{Link:X.b})}}),r.a.createElement(W.a,{exact:!0,path:"/users",render:function(){return r.a.createElement(_,{users:c,Link:X.b})}}),r.a.createElement(W.a,{exact:!0,path:"/users/:id",render:function(e){var t,n=e.match;return r.a.createElement(G,{user:(t=n.params.id,c.find(function(e){return e.id===t}))})}}),r.a.createElement(W.a,{exact:!0,path:"/blogs/:id",render:function(t){var n,a=t.match;return r.a.createElement(Q,{blog:(n=a.params.id,e.blogs.find(function(e){return e.id===n}))})}})))):r.a.createElement("div",null,e.notifications&&r.a.createElement(Y.a,null,e.notifications),r.a.createElement(A,null))}),te=n(188),ne=Object(K.c)({notifications:x,user:U,blogs:N}),ae=Object(K.e)(ne,Object(K.a)(te.a)),re=(n(356),function(){l.a.render(r.a.createElement(j.a,{store:ae},r.a.createElement(ee,null)),document.getElementById("root"))});re(),ae.subscribe(re)}},[[202,1,2]]]);
//# sourceMappingURL=main.8ddda36e.chunk.js.map