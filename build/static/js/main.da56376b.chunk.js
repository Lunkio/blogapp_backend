(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{201:function(e,t,a){e.exports=a(356)},355:function(e,t,a){},356:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(37),c=a.n(l),o=a(88),s=a(14),u=a.n(s),i=a(31),m=a.n(i),d="/api/blogs",f=null,p=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(m.a.get(d));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},E=function(e){var t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:f}},n.next=3,u.a.awrap(m.a.post(d,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},b=function(e,t){var a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(m.a.put("".concat(d,"/").concat(e),t));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))},g=function(e){var t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:f}},n.next=3,u.a.awrap(m.a.delete("".concat(d,"/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},v=function(e){f="bearer ".concat(e)},h=function(e,t){var a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(m.a.post("".concat(d,"/").concat(e,"/comments"),{comment:t}));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))},y=function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(m.a.post("/api/login",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},w=a(364),x=a(365),C=a(370),N=a(21),O=function(e,t){return function(a){a({type:"NEW",data:e}),setTimeout((function(){a({type:"HIDE"})}),1e3*t)}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW":return t.data;case"HIDE":return"";case"TEST":return t.data;default:return e}},U=function(e){return function(t){return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:"ADD_USER",user:e});case 1:case"end":return a.stop()}}))}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return t.user;case"REMOVE_USER":return t.data;default:return e}},I={setNotification:O,addUser:U},j=Object(N.b)((function(e){return{notifications:e.notifications,blogs:e.blogs,user:e.user}}),I)((function(e){return r.a.createElement(w.a,{style:{marginTop:"2rem"}},r.a.createElement("h2",null,"Log in to application"),r.a.createElement(x.a,{onSubmit:function(t){var a,n,r;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t.preventDefault(),a=t.target.username.value,n=t.target.password.value,l.prev=3,l.next=6,u.a.awrap(y({username:a,password:n}));case 6:r=l.sent,window.localStorage.setItem("loggedUser",JSON.stringify(r)),v(r.token),e.addUser(r),l.next=15;break;case 12:l.prev=12,l.t0=l.catch(3),e.setNotification("wrong username or password",5);case 15:case"end":return l.stop()}}),null,null,[[3,12]])}},r.a.createElement(x.a.Field,null,r.a.createElement("label",{className:"username"},"Username"),r.a.createElement("input",{id:"idUsername",type:"text",name:"username",placeholder:"Username"})),r.a.createElement(x.a.Field,null,r.a.createElement("label",{className:"password"},"Password"),r.a.createElement("input",{id:"idPassword",type:"password",name:"password",placeholder:"Password"})),r.a.createElement(C.a,{className:"login-btn",primary:!0,type:"submit"},"Login"),r.a.createElement("span",{style:{marginLeft:"1rem"}},"Want to try this application? Login with these: username: ",r.a.createElement("strong",null,"test_user"),", password: ",r.a.createElement("strong",null,"bigsecret"))))})),B=a(119),T=a(190),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"ADD":return[].concat(Object(T.a)(e),[t.data]);case"LIKE":var a=t.data,n=t.data.id;return e.map((function(e){return e.id!==n?e:a}));case"COMMENT":var r=t.data,l=t.data.id;return e.map((function(e){return e.id!==l?e:r}));case"REMOVE":return e.filter((function(e){return e.id!==t.id}));default:return e}},A={addBlog:function(e,t){return function(a){var n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.awrap(E(e));case 2:n=r.sent,n=Object(B.a)({},n,{user:t}),a({type:"ADD",data:n});case 5:case"end":return r.stop()}}))}},setNotification:O},D=Object(N.b)((function(e){return{notifications:e.notifications,users:e.users,blogs:e.blogs}}),A)((function(e){v(e.user.token);return r.a.createElement(x.a,{onSubmit:function(t){t.preventDefault();var a=t.target.title.value,n=t.target.author.value,r=t.target.url.value;if(""!==a&&""!==n&&""!==r){var l={title:a,author:n,url:r},c=e.user;e.addBlog(l,c),t.target.title.value="",t.target.author.value="",t.target.url.value="",e.setNotification("a new blog ".concat(l.title," by ").concat(l.author," added"),5)}else e.setNotification("Please fill in all the fields",5)}},r.a.createElement(x.a.Field,null,r.a.createElement("label",{className:"title"},"Title:"),r.a.createElement("input",{id:"idTitle",name:"title",placeholder:"Title"})),r.a.createElement(x.a.Field,null,r.a.createElement("label",{className:"author"},"Author:"),r.a.createElement("input",{id:"idAuthor",name:"author",placeholder:"Author"})),r.a.createElement(x.a.Field,null,r.a.createElement("label",{className:"url"},"Url:"),r.a.createElement("input",{id:"idUrl",name:"url",placeholder:"Url"})),r.a.createElement(C.a,{primary:!0,id:"idButton",type:"submit"},"Add new blog"))})),L=a(367),z=a(30),H=Object(N.b)((function(e){return{notifications:e.notifications,blogs:e.blogs,user:e.user}}))((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],c=a[1],s={display:l?"none":""},u={display:l?"":"none"};return e.blogs.sort((function(e,t){return e.likes-t.likes})),r.a.createElement("div",null,r.a.createElement("div",{style:s},r.a.createElement("h1",null,"Welcome to Blog App"),r.a.createElement("p",null,"Here you can add your own blogs, or read other people's blog posts"),r.a.createElement(C.a,{primary:!0,className:"create-button",onClick:function(){return c(!0)}},"Create new blog")),r.a.createElement("div",{style:u},r.a.createElement("h2",{className:"create-new-header"},"Create new"),r.a.createElement(D,{blogs:e.blogs,user:e.user}),r.a.createElement(C.a,{style:{marginTop:"1rem"},negative:!0,onClick:function(){return c(!1)}},"Close"),r.a.createElement("br",null)),r.a.createElement("h3",null,"Blogs:"),r.a.createElement(L.a,{celled:!0,striped:!0,selectable:!0},r.a.createElement(L.a.Header,null,r.a.createElement(L.a.Row,null,r.a.createElement(L.a.HeaderCell,null,"Title"),r.a.createElement(L.a.HeaderCell,null,"Author"))),r.a.createElement(L.a.Body,null,e.blogs.map((function(e){return r.a.createElement(L.a.Row,{key:e.id},r.a.createElement(L.a.Cell,null,r.a.createElement(z.b,{to:"/blogs/".concat(e.id),className:"blog-title"},e.title)),r.a.createElement(L.a.Cell,null,r.a.createElement("p",{className:"blog-author"},e.author)))})))))})),_=Object(N.b)((function(e){return{users:e.users}}))((function(e){return r.a.createElement("div",null,r.a.createElement(L.a,{definition:!0},r.a.createElement(L.a.Header,null,r.a.createElement(L.a.Row,null,r.a.createElement(L.a.HeaderCell,null,"Users"),r.a.createElement(L.a.HeaderCell,null,"Blogs created"))),r.a.createElement(L.a.Body,null,e.users.map((function(e){return r.a.createElement(L.a.Row,{key:e.id},r.a.createElement(L.a.Cell,null,r.a.createElement(z.b,{className:"user-name",to:"/users/".concat(e.id)},e.name)),r.a.createElement(L.a.Cell,null,r.a.createElement("p",{className:"blog-amount-test"},e.blogs.length)))})))))})),M=a(44),W=a(43),F=Object(W.e)((function(e){if(void 0===e.user)return null;var t=e.user.blogs.map((function(e){return e.title}));return r.a.createElement("div",null,r.a.createElement(C.a,{basic:!0,color:"blue",size:"mini",animated:!0,onClick:function(){return e.history.push("/users")}},r.a.createElement(C.a.Content,{visible:!0},"Go back"),r.a.createElement(C.a.Content,{hidden:!0},r.a.createElement(M.a,{name:"arrow left"}))),r.a.createElement("h2",null,e.user.name),r.a.createElement("p",{style:{fontWeight:"bold"}},"Added Blogs:"),r.a.createElement("ul",null,e.user.blogs.map((function(e){return r.a.createElement("li",{key:e.id},e.title)}))),t.length<1&&r.a.createElement("div",{style:{fontStyle:"italic"}},"No added blogs"))})),P=a(89),G=a(368),J=a(41),V={addLike:function(e,t){return function(a){var n,r;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=Object(B.a)({},t,{likes:t.likes+1}),l.next=3,u.a.awrap(b(e,n));case 3:r=l.sent,a({type:"LIKE",data:r});case 5:case"end":return l.stop()}}))}},addComment:function(e,t){return function(a){var n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.awrap(h(e,t));case 2:n=r.sent,a({type:"COMMENT",data:n});case 4:case"end":return r.stop()}}))}},removeBlog:function(e,t){return function(a){return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return v(t),n.next=3,u.a.awrap(g(e));case 3:a({type:"REMOVE",id:e});case 4:case"end":return n.stop()}}))}}},K=Object(J.d)(W.e,Object(N.b)((function(e){return{user:e.user,blogs:e.blogs}}),V))((function(e){if(void 0===e.blog)return null;void 0!==e.blog.user&&null!==e.blog.user||(e.blog.user={name:'"no user added this blog"'});var t;return r.a.createElement("div",null,r.a.createElement(C.a,{basic:!0,color:"blue",size:"mini",animated:!0,onClick:function(){return e.history.push("/")}},r.a.createElement(C.a.Content,{visible:!0},"Go back"),r.a.createElement(C.a.Content,{hidden:!0},r.a.createElement(M.a,{name:"arrow left"}))),r.a.createElement("h2",null,e.blog.title,", ",r.a.createElement("span",{style:{fontSize:"1rem"}},"author:")," ",e.blog.author),r.a.createElement("p",{style:{fontStyle:"italic"}},e.blog.url),r.a.createElement(C.a,{as:"div",labelPosition:"right"},r.a.createElement(C.a,{basic:!0,color:"blue",onClick:function(){return function(t){var a=t.id;e.addLike(a,t)}(e.blog)}},r.a.createElement(M.a,{name:"heart"}),"Like"),r.a.createElement(P.a,{as:"a",basic:!0,color:"blue",pointing:"left"},e.blog.likes)),r.a.createElement("p",{style:{marginTop:"2rem"}},"added by ",e.blog.user.name,r.a.createElement("span",{style:(t=e.blog,t.user.name===e.user.name?{display:"",marginLeft:"1rem"}:{display:"none"})},r.a.createElement(C.a,{className:"remove-button",basic:!0,color:"red",onClick:function(){return function(t){var a=t.id;window.confirm("remove blog ".concat(t.title," by ").concat(t.author))&&(e.removeBlog(a,e.user.token),e.history.push("/"))}(e.blog)}},"Remove"))),r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h3",null,"Comments"),r.a.createElement(x.a,{onSubmit:function(t){t.preventDefault();var a=t.target.newComment.value;e.addComment(e.blog.id,a),t.target.newComment.value=""}},r.a.createElement("input",{name:"newComment",placeholder:"Write comments"}),r.a.createElement(C.a,{primary:!0,type:"submit"},"Add Comment")),r.a.createElement(G.a,null,e.blog.comments.map((function(e,t){return r.a.createElement(G.a.Item,{key:t},r.a.createElement(G.a.Icon,{name:"users"}),r.a.createElement(G.a.Content,{className:"comment"},e))})))))})),q=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(m.a.get("/api/users"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},X=a(369),Y=a(371),Z={setNotification:O,initializeBlogs:function(){return function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(p());case 2:t=a.sent,e({type:"INIT_BLOGS",data:t});case 4:case"end":return a.stop()}}))}},initializeUsers:function(){return function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(q());case 2:t=a.sent,e({type:"INIT_USERS",data:t});case 4:case"end":return a.stop()}}))}},addUser:U,removeUser:function(){return function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"REMOVE_USER",data:null});case 1:case"end":return t.stop()}}))}}},$=Object(N.b)((function(e){return{notifications:e.notifications,blogs:e.blogs,user:e.user,users:e.users}}),Z)((function(e){var t=Object(n.useState)("blogs"),a=Object(o.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){e.initializeBlogs(),e.initializeUsers()}),[]),Object(n.useEffect)((function(){var t=window.localStorage.getItem("loggedUser");if(t){var a=JSON.parse(t);e.addUser(a)}}),[]);return e.user?r.a.createElement(w.a,null,r.a.createElement(z.a,null,e.notifications&&r.a.createElement(X.a,null,e.notifications),r.a.createElement(Y.a,{pointing:!0,secondary:!0,style:{marginBottom:"2rem"}},r.a.createElement(Y.a.Item,{name:"blogs",active:"blogs"===l},r.a.createElement(z.b,{to:"/",onClick:function(){return c("blogs")}},"Blogs")),r.a.createElement(Y.a.Item,{name:"users",active:"users"===l},r.a.createElement(z.b,{to:"/users",onClick:function(){return c("users")}},"Users")),r.a.createElement(Y.a.Item,{position:"right"},r.a.createElement("span",null,e.user.name," logged in ",r.a.createElement(C.a,{basic:!0,color:"red",onClick:function(){return window.localStorage.removeItem("loggedUser"),void e.removeUser()}},"Logout")))),r.a.createElement("div",null,r.a.createElement(W.a,{exact:!0,path:"/",render:function(){return r.a.createElement(H,null)}}),r.a.createElement(W.a,{exact:!0,path:"/users",render:function(){return r.a.createElement(_,null)}}),r.a.createElement(W.a,{exact:!0,path:"/users/:id",render:function(t){var a,n=t.match;return r.a.createElement(F,{user:(a=n.params.id,e.users.find((function(e){return e.id===a})))})}}),r.a.createElement(W.a,{exact:!0,path:"/blogs/:id",render:function(t){var a,n=t.match;return r.a.createElement(K,{blog:(a=n.params.id,e.blogs.find((function(e){return e.id===a})))})}})))):r.a.createElement("div",null,e.notifications&&r.a.createElement(X.a,null,e.notifications),r.a.createElement(j,null))})),ee=a(188),te=Object(J.c)({notifications:k,user:S,blogs:R,users:Q}),ae=Object(J.e)(te,Object(J.a)(ee.a)),ne=(a(355),function(){c.a.render(r.a.createElement(N.a,{store:ae},r.a.createElement($,null)),document.getElementById("root"))});ne(),ae.subscribe(ne)}},[[201,1,2]]]);
//# sourceMappingURL=main.da56376b.chunk.js.map